# 事务 (Transaction)

构成单一逻辑工作单元的操作集合称为事务。事务要么整个执行，要么属于这个事务的操作
一个都不执行。事务具有以下几个特性：

* 原子性 (`Atomicity`)：事务的所有操作在数据库中要么全部正确反映出来，要么完全不反映。
* 一致性 (`Consistency`)：隔离执行事务时（换言之，在没有其他事务并发执行的情况下）
  保持数据库的一致性。
* 隔离性 (`Isolation`)：尽管多个事务可能并发执行，但系统保证，对于任何一对事务
  T1 和 T2，在 T1 看来，T2 或者在 T1 开始之前已经完成执行，或者在 T1 完成之后开
  始执行。因此，每个事务都感觉不到系统中有其他事务在并发地执行。
* 持久性 (`Durability`)：一个事务完成后，它对数据库的改变必须是永久的，即使出现系统故障。

从一个转账的例子来看 `ACID`：

> T1:<br>
> read(A);<br>
> A := A - 50;<br>
> write(A);<br>
> read(B);<br>
> B := B - 50;<br>
> wrie(B).<br>

* 一致性：在这个情况，一致性要求事务不能改变 A、B 之和。如果没有一致性要求，金额
  可能被事务凭空创造或者销毁！
* 原子性：原子性要求从A中扣钱、往B中加钱是必须一起发生的，不能从A中扣了钱，但是不
  往B中加钱。某个事务的操作要么在数据库中全部反应出来，要么全部不反映。
* 持久性：系统必须保证任何系统故障都不会引起与这次转账相关的数据丢失。
* 隔离性：在有其他事务在并发执行的情况下，数据库需要保证这次的转账能正常进行。
